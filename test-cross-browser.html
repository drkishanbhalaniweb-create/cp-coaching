<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cross-Browser Testing Helper | Claim Readiness Diagnostic</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: system-ui, -apple-system, 'Segoe UI', sans-serif;
      line-height: 1.6;
      padding: 20px;
      background: linear-gradient(135deg, #0f243d 0%, #163b63 50%, #1f4f85 100%);
      color: #fff;
      min-height: 100vh;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 20px 50px rgba(15, 36, 61, 0.25);
      color: #111827;
    }
    
    h1 {
      color: #163b63;
      margin-bottom: 10px;
      font-size: 32px;
    }
    
    .subtitle {
      color: #4b5563;
      margin-bottom: 30px;
      font-size: 18px;
    }
    
    .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .info-card {
      background: rgba(59, 130, 246, 0.1);
      border: 2px solid rgba(59, 130, 246, 0.3);
      border-radius: 12px;
      padding: 20px;
    }
    
    .info-card h3 {
      color: #163b63;
      margin-bottom: 10px;
      font-size: 18px;
    }
    
    .info-card p {
      color: #4b5563;
      font-size: 14px;
      margin: 5px 0;
    }
    
    .info-card strong {
      color: #111827;
    }
    
    .section {
      margin: 30px 0;
      padding: 20px;
      background: rgba(249, 250, 251, 0.5);
      border-radius: 12px;
      border: 1px solid rgba(209, 213, 219, 0.5);
    }
    
    .section h2 {
      color: #163b63;
      margin-bottom: 15px;
      font-size: 24px;
    }
    
    .checklist {
      list-style: none;
      padding: 0;
    }
    
    .checklist li {
      padding: 10px;
      margin: 5px 0;
      background: white;
      border-radius: 8px;
      border: 1px solid #e5e7eb;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .checklist input[type="checkbox"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
    }
    
    .checklist label {
      cursor: pointer;
      flex: 1;
    }
    
    .status-indicator {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      margin-left: 10px;
    }
    
    .status-pass {
      background: #10b981;
      color: white;
    }
    
    .status-fail {
      background: #dc2626;
      color: white;
    }
    
    .status-pending {
      background: #f59e0b;
      color: white;
    }
    
    .btn {
      display: inline-block;
      padding: 12px 24px;
      background: linear-gradient(135deg, #163b63, #1f4f85);
      color: white;
      text-decoration: none;
      border-radius: 8px;
      font-weight: 600;
      border: none;
      cursor: pointer;
      margin: 5px;
      transition: transform 0.2s ease;
    }
    
    .btn:hover {
      transform: translateY(-2px);
    }
    
    .btn-secondary {
      background: linear-gradient(135deg, #3b82f6, #2563eb);
    }
    
    .btn-success {
      background: linear-gradient(135deg, #10b981, #059669);
    }
    
    .feature-support {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
      gap: 10px;
      margin: 20px 0;
      font-size: 14px;
    }
    
    .feature-support > div {
      padding: 10px;
      background: white;
      border-radius: 6px;
      text-align: center;
    }
    
    .feature-support .header {
      font-weight: 600;
      background: #163b63;
      color: white;
    }
    
    .support-yes {
      color: #10b981;
      font-weight: 600;
    }
    
    .support-partial {
      color: #f59e0b;
      font-weight: 600;
    }
    
    .actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin: 20px 0;
    }
    
    .progress-summary {
      background: white;
      padding: 20px;
      border-radius: 12px;
      margin: 20px 0;
      border: 2px solid #3b82f6;
    }
    
    .progress-bar-container {
      width: 100%;
      height: 30px;
      background: #e5e7eb;
      border-radius: 15px;
      overflow: hidden;
      margin: 10px 0;
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #10b981, #059669);
      transition: width 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
      font-size: 14px;
    }
    
    @media (max-width: 768px) {
      .container {
        padding: 20px;
      }
      
      h1 {
        font-size: 24px;
      }
      
      .info-grid {
        grid-template-columns: 1fr;
      }
      
      .feature-support {
        grid-template-columns: 1fr;
      }
      
      .actions {
        flex-direction: column;
      }
      
      .btn {
        width: 100%;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üß™ Cross-Browser Testing Helper</h1>
    <p class="subtitle">Claim Readiness Diagnostic - Browser Compatibility Verification</p>
    
    <!-- Browser Detection -->
    <div class="info-grid">
      <div class="info-card">
        <h3>Current Browser</h3>
        <p><strong>Name:</strong> <span id="browser-name">Detecting...</span></p>
        <p><strong>Version:</strong> <span id="browser-version">Detecting...</span></p>
        <p><strong>Platform:</strong> <span id="platform">Detecting...</span></p>
      </div>
      
      <div class="info-card">
        <h3>Viewport</h3>
        <p><strong>Width:</strong> <span id="viewport-width">0</span>px</p>
        <p><strong>Height:</strong> <span id="viewport-height">0</span>px</p>
        <p><strong>Device Pixel Ratio:</strong> <span id="dpr">1</span></p>
      </div>
      
      <div class="info-card">
        <h3>Features</h3>
        <p><strong>Touch:</strong> <span id="touch-support">No</span></p>
        <p><strong>localStorage:</strong> <span id="localstorage-support">No</span></p>
        <p><strong>Fetch API:</strong> <span id="fetch-support">No</span></p>
      </div>
      
      <div class="info-card">
        <h3>Test Status</h3>
        <p><strong>Progress:</strong> <span id="test-progress">0%</span></p>
        <p><strong>Passed:</strong> <span id="tests-passed">0</span></p>
        <p><strong>Failed:</strong> <span id="tests-failed">0</span></p>
      </div>
    </div>
    
    <!-- Progress Summary -->
    <div class="progress-summary">
      <h3>Testing Progress</h3>
      <div class="progress-bar-container">
        <div class="progress-bar" id="progress-bar" style="width: 0%;">0%</div>
      </div>
      <p id="progress-text">No tests completed yet</p>
    </div>
    
    <!-- Actions -->
    <div class="actions">
      <a href="diagnostic.html" class="btn" target="_blank">üöÄ Open Diagnostic</a>
      <button class="btn btn-secondary" onclick="runFeatureTests()">üîç Run Feature Tests</button>
      <button class="btn btn-success" onclick="exportResults()">üìä Export Results</button>
      <button class="btn" onclick="resetTests()">üîÑ Reset Tests</button>
    </div>
    
    <!-- Feature Support Matrix -->
    <div class="section">
      <h2>Browser Feature Support</h2>
      <div class="feature-support">
        <div class="header">Feature</div>
        <div class="header">Chrome</div>
        <div class="header">Firefox</div>
        <div class="header">Safari</div>
        <div class="header">Mobile</div>
        
        <div>CSS Custom Properties</div>
        <div class="support-yes">‚úì</div>
        <div class="support-yes">‚úì</div>
        <div class="support-yes">‚úì</div>
        <div class="support-yes">‚úì</div>
        
        <div>Flexbox</div>
        <div class="support-yes">‚úì</div>
        <div class="support-yes">‚úì</div>
        <div class="support-yes">‚úì</div>
        <div class="support-yes">‚úì</div>
        
        <div>backdrop-filter</div>
        <div class="support-yes">‚úì</div>
        <div class="support-yes">‚úì</div>
        <div class="support-partial">‚úì*</div>
        <div class="support-partial">‚úì*</div>
        
        <div>ES6 Classes</div>
        <div class="support-yes">‚úì</div>
        <div class="support-yes">‚úì</div>
        <div class="support-yes">‚úì</div>
        <div class="support-yes">‚úì</div>
        
        <div>Fetch API</div>
        <div class="support-yes">‚úì</div>
        <div class="support-yes">‚úì</div>
        <div class="support-yes">‚úì</div>
        <div class="support-yes">‚úì</div>
        
        <div>localStorage</div>
        <div class="support-yes">‚úì</div>
        <div class="support-yes">‚úì</div>
        <div class="support-yes">‚úì</div>
        <div class="support-yes">‚úì</div>
      </div>
      <p style="font-size: 12px; color: #4b5563; margin-top: 10px;">* Requires -webkit- prefix</p>
    </div>
    
    <!-- Testing Checklist -->
    <div class="section">
      <h2>Manual Testing Checklist</h2>
      <ul class="checklist" id="test-checklist">
        <li>
          <input type="checkbox" id="test-1" onchange="updateProgress()">
          <label for="test-1">Intro screen displays correctly with glassmorphism effects</label>
        </li>
        <li>
          <input type="checkbox" id="test-2" onchange="updateProgress()">
          <label for="test-2">Click "Start Diagnostic" button works</label>
        </li>
        <li>
          <input type="checkbox" id="test-3" onchange="updateProgress()">
          <label for="test-3">Complete all 5 questions successfully</label>
        </li>
        <li>
          <input type="checkbox" id="test-4" onchange="updateProgress()">
          <label for="test-4">Smooth transitions between questions</label>
        </li>
        <li>
          <input type="checkbox" id="test-5" onchange="updateProgress()">
          <label for="test-5">Progress bar updates correctly</label>
        </li>
        <li>
          <input type="checkbox" id="test-6" onchange="updateProgress()">
          <label for="test-6">Answer cards have hover/touch effects</label>
        </li>
        <li>
          <input type="checkbox" id="test-7" onchange="updateProgress()">
          <label for="test-7">Recommendation screen displays correctly</label>
        </li>
        <li>
          <input type="checkbox" id="test-8" onchange="updateProgress()">
          <label for="test-8">Transparency layer shows all 5 assessment areas</label>
        </li>
        <li>
          <input type="checkbox" id="test-9" onchange="updateProgress()">
          <label for="test-9">CTA button triggers Calendly correctly</label>
        </li>
        <li>
          <input type="checkbox" id="test-10" onchange="updateProgress()">
          <label for="test-10">Responsive at 320px width (no horizontal scroll)</label>
        </li>
        <li>
          <input type="checkbox" id="test-11" onchange="updateProgress()">
          <label for="test-11">Responsive at 768px width (tablet)</label>
        </li>
        <li>
          <input type="checkbox" id="test-12" onchange="updateProgress()">
          <label for="test-12">Responsive at 1024px width (desktop)</label>
        </li>
        <li>
          <input type="checkbox" id="test-13" onchange="updateProgress()">
          <label for="test-13">Responsive at 1920px width (large desktop)</label>
        </li>
        <li>
          <input type="checkbox" id="test-14" onchange="updateProgress()">
          <label for="test-14">Keyboard navigation works (Tab, Enter, Space)</label>
        </li>
        <li>
          <input type="checkbox" id="test-15" onchange="updateProgress()">
          <label for="test-15">No console errors during complete flow</label>
        </li>
      </ul>
    </div>
    
    <!-- Test Results -->
    <div class="section">
      <h2>Automated Feature Tests</h2>
      <div id="feature-test-results">
        <p style="color: #4b5563;">Click "Run Feature Tests" to check browser capabilities</p>
      </div>
    </div>
  </div>
  
  <script>
    // Detect browser
    function detectBrowser() {
      const ua = navigator.userAgent;
      let browserName = 'Unknown';
      let browserVersion = 'Unknown';
      
      if (ua.indexOf('Chrome') > -1 && ua.indexOf('Edg') === -1) {
        browserName = 'Chrome';
        browserVersion = ua.match(/Chrome\/(\d+)/)?.[1] || 'Unknown';
      } else if (ua.indexOf('Firefox') > -1) {
        browserName = 'Firefox';
        browserVersion = ua.match(/Firefox\/(\d+)/)?.[1] || 'Unknown';
      } else if (ua.indexOf('Safari') > -1 && ua.indexOf('Chrome') === -1) {
        browserName = 'Safari';
        browserVersion = ua.match(/Version\/(\d+)/)?.[1] || 'Unknown';
      } else if (ua.indexOf('Edg') > -1) {
        browserName = 'Edge';
        browserVersion = ua.match(/Edg\/(\d+)/)?.[1] || 'Unknown';
      }
      
      document.getElementById('browser-name').textContent = browserName;
      document.getElementById('browser-version').textContent = browserVersion;
      document.getElementById('platform').textContent = navigator.platform;
    }
    
    // Update viewport info
    function updateViewportInfo() {
      document.getElementById('viewport-width').textContent = window.innerWidth;
      document.getElementById('viewport-height').textContent = window.innerHeight;
      document.getElementById('dpr').textContent = window.devicePixelRatio || 1;
    }
    
    // Check feature support
    function checkFeatureSupport() {
      document.getElementById('touch-support').textContent = 
        ('ontouchstart' in window) ? 'Yes' : 'No';
      
      try {
        localStorage.setItem('test', 'test');
        localStorage.removeItem('test');
        document.getElementById('localstorage-support').textContent = 'Yes';
      } catch (e) {
        document.getElementById('localstorage-support').textContent = 'No';
      }
      
      document.getElementById('fetch-support').textContent = 
        (typeof fetch !== 'undefined') ? 'Yes' : 'No';
    }
    
    // Update progress
    function updateProgress() {
      const checkboxes = document.querySelectorAll('#test-checklist input[type="checkbox"]');
      const total = checkboxes.length;
      const checked = Array.from(checkboxes).filter(cb => cb.checked).length;
      const percentage = Math.round((checked / total) * 100);
      
      document.getElementById('test-progress').textContent = percentage + '%';
      document.getElementById('tests-passed').textContent = checked;
      document.getElementById('tests-failed').textContent = total - checked;
      
      const progressBar = document.getElementById('progress-bar');
      progressBar.style.width = percentage + '%';
      progressBar.textContent = percentage + '%';
      
      const progressText = document.getElementById('progress-text');
      if (percentage === 100) {
        progressText.textContent = '‚úÖ All tests completed! Browser is fully compatible.';
        progressText.style.color = '#10b981';
      } else if (percentage > 0) {
        progressText.textContent = `${checked} of ${total} tests completed (${percentage}%)`;
        progressText.style.color = '#4b5563';
      } else {
        progressText.textContent = 'No tests completed yet';
        progressText.style.color = '#4b5563';
      }
      
      // Save progress to localStorage
      try {
        const results = {};
        checkboxes.forEach(cb => {
          results[cb.id] = cb.checked;
        });
        localStorage.setItem('cross-browser-test-results', JSON.stringify(results));
      } catch (e) {
        console.error('Could not save progress:', e);
      }
    }
    
    // Load saved progress
    function loadProgress() {
      try {
        const saved = localStorage.getItem('cross-browser-test-results');
        if (saved) {
          const results = JSON.parse(saved);
          Object.entries(results).forEach(([id, checked]) => {
            const checkbox = document.getElementById(id);
            if (checkbox) {
              checkbox.checked = checked;
            }
          });
          updateProgress();
        }
      } catch (e) {
        console.error('Could not load progress:', e);
      }
    }
    
    // Run feature tests
    function runFeatureTests() {
      const resultsDiv = document.getElementById('feature-test-results');
      resultsDiv.innerHTML = '<p>Running tests...</p>';
      
      const tests = [
        {
          name: 'CSS Custom Properties',
          test: () => CSS.supports('color', 'var(--test)')
        },
        {
          name: 'Flexbox',
          test: () => CSS.supports('display', 'flex')
        },
        {
          name: 'CSS Grid',
          test: () => CSS.supports('display', 'grid')
        },
        {
          name: 'backdrop-filter',
          test: () => CSS.supports('backdrop-filter', 'blur(10px)') || 
                      CSS.supports('-webkit-backdrop-filter', 'blur(10px)')
        },
        {
          name: 'ES6 Classes',
          test: () => {
            try {
              eval('class Test {}');
              return true;
            } catch (e) {
              return false;
            }
          }
        },
        {
          name: 'Arrow Functions',
          test: () => {
            try {
              eval('() => {}');
              return true;
            } catch (e) {
              return false;
            }
          }
        },
        {
          name: 'Fetch API',
          test: () => typeof fetch !== 'undefined'
        },
        {
          name: 'localStorage',
          test: () => {
            try {
              localStorage.setItem('test', 'test');
              localStorage.removeItem('test');
              return true;
            } catch (e) {
              return false;
            }
          }
        },
        {
          name: 'Promises',
          test: () => typeof Promise !== 'undefined'
        },
        {
          name: 'async/await',
          test: () => {
            try {
              eval('async function test() { await Promise.resolve(); }');
              return true;
            } catch (e) {
              return false;
            }
          }
        }
      ];
      
      let html = '<ul class="checklist">';
      let allPassed = true;
      
      tests.forEach(({ name, test }) => {
        const passed = test();
        allPassed = allPassed && passed;
        const icon = passed ? '‚úÖ' : '‚ùå';
        const status = passed ? 'PASS' : 'FAIL';
        const statusClass = passed ? 'status-pass' : 'status-fail';
        
        html += `
          <li>
            <span style="font-size: 20px;">${icon}</span>
            <label style="flex: 1;">${name}</label>
            <span class="status-indicator ${statusClass}">${status}</span>
          </li>
        `;
      });
      
      html += '</ul>';
      
      if (allPassed) {
        html += '<p style="color: #10b981; font-weight: 600; margin-top: 20px;">‚úÖ All features supported! This browser is fully compatible.</p>';
      } else {
        html += '<p style="color: #dc2626; font-weight: 600; margin-top: 20px;">‚ö†Ô∏è Some features are not supported. This browser may not be compatible.</p>';
      }
      
      resultsDiv.innerHTML = html;
    }
    
    // Export results
    function exportResults() {
      const browserName = document.getElementById('browser-name').textContent;
      const browserVersion = document.getElementById('browser-version').textContent;
      const platform = document.getElementById('platform').textContent;
      const progress = document.getElementById('test-progress').textContent;
      
      const checkboxes = document.querySelectorAll('#test-checklist input[type="checkbox"]');
      const results = Array.from(checkboxes).map(cb => ({
        test: cb.nextElementSibling.textContent,
        passed: cb.checked
      }));
      
      const report = {
        date: new Date().toISOString(),
        browser: {
          name: browserName,
          version: browserVersion,
          platform: platform
        },
        viewport: {
          width: window.innerWidth,
          height: window.innerHeight,
          dpr: window.devicePixelRatio
        },
        progress: progress,
        tests: results
      };
      
      const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `cross-browser-test-${browserName}-${Date.now()}.json`;
      a.click();
      URL.revokeObjectURL(url);
      
      alert('Test results exported successfully!');
    }
    
    // Reset tests
    function resetTests() {
      if (confirm('Are you sure you want to reset all test results?')) {
        const checkboxes = document.querySelectorAll('#test-checklist input[type="checkbox"]');
        checkboxes.forEach(cb => cb.checked = false);
        updateProgress();
        localStorage.removeItem('cross-browser-test-results');
        alert('Test results reset successfully!');
      }
    }
    
    // Initialize
    detectBrowser();
    updateViewportInfo();
    checkFeatureSupport();
    loadProgress();
    
    // Update viewport info on resize
    window.addEventListener('resize', updateViewportInfo);
  </script>
</body>
</html>
